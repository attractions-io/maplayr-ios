{"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/maplayr\/user-location"]}],"kind":"article","metadata":{"roleHeading":"Article","modules":[{"name":"MapLayr"}],"role":"article","title":"Showing the User’s Location"},"hierarchy":{"paths":[["doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr"]]},"sections":[],"seeAlsoSections":[{"title":"Related Documentation","identifiers":["doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/UserLocationMarker","doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/Position","doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/Heading","doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/ReactiveRoute","doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/MapView"],"anchor":"Related-Documentation"},{"title":"Getting Started","identifiers":["doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/API-Key","doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/Display-Map","doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/Bundle-Map","doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/Annotations","doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/Routing","doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/Camera-Positioning"],"anchor":"Getting-Started","generated":true}],"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","type":"heading","text":"Overview","level":2},{"type":"paragraph","inlineContent":[{"text":"MapLayr provides built-in support for displaying the user’s location on your map through the ","type":"text"},{"identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/UserLocationMarker","type":"reference","isActive":true},{"text":" component. This feature allows you to show where the user is currently located within your venue and optionally track their movement in real-time.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The user location marker also provides location data that can be used with other MapLayr features, such as reactive routing."}]},{"anchor":"Enabling-User-Location","type":"heading","text":"Enabling User Location","level":2},{"type":"paragraph","inlineContent":[{"type":"text","text":"MapLayr does not request any location permissions from the user on your app’s behalf: you will need to refer to "},{"identifier":"https:\/\/developer.apple.com\/documentation\/corelocation\/requesting-authorization-to-use-location-services","type":"reference","isActive":true},{"type":"text","text":" on how to request location authorisation from the user."}]},{"anchor":"Adding-User-Location-Marker","type":"heading","text":"Adding User Location Marker","level":2},{"type":"paragraph","inlineContent":[{"text":"Create and configure a ","type":"text"},{"isActive":true,"identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/UserLocationMarker","type":"reference"},{"text":" to display the user’s location:","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["\/\/ Create user location marker","let userLocationMarker = UserLocationMarker()","","\/\/ Add to map view","mapView.addUserLocationMarker(userLocationMarker)"]},{"type":"paragraph","inlineContent":[{"text":"By default, a user location marker will automatically track the user’s location and orientation using the CoreLocation framework.","type":"text"}]},{"anchor":"Using-an-Alternate-Location","type":"heading","text":"Using an Alternate Location","level":2},{"type":"paragraph","inlineContent":[{"text":"The user location marker can be configured to show a location and orientation other than that of the user. The initialiser accepts optional ","type":"text"},{"code":"location","type":"codeVoice"},{"text":" and ","type":"text"},{"code":"heading","type":"codeVoice"},{"text":" parameters which, if supplied, prevent the marker from interacting with CoreLocation:","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["\/\/ Create marker with custom location","let customPosition = Position(","    coordinates: MultilevelCoordinates(","        coordinates: customCoordinates","    ),","    horizontalAccuracy: 5.0,","    timestamp: Date()",")","","let customHeading = Heading(","    direction: 45.0, \/\/ degrees","    accuracy: 15.0",")","","let userLocationMarker = UserLocationMarker(","    location: customPosition,","    heading: customHeading",")"]},{"type":"paragraph","inlineContent":[{"text":"After initialisation, the user location marker provides ","type":"text"},{"identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/UserLocationMarker\/overrideLocation","isActive":true,"type":"reference"},{"text":" and ","type":"text"},{"identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/UserLocationMarker\/overrideHeading","isActive":true,"type":"reference"},{"text":" properties to update those values. If they are set to ","type":"text"},{"code":"nil","type":"codeVoice"},{"text":", the marker will resume using the user’s actual location or heading from CoreLocation.","type":"text"}]},{"anchor":"Using-with-Reactive-Routes","type":"heading","text":"Using with Reactive Routes","level":2},{"type":"paragraph","inlineContent":[{"text":"The user location marker provides a coordinates provider through its ","type":"text"},{"isActive":true,"identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/UserLocationMarker\/coordinatesProvider","type":"reference"},{"text":" property that can be used as an input to reactive routes, allowing routes to automatically update as the user moves. See ","type":"text"},{"isActive":true,"identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/Routing","type":"reference"},{"text":" for more information.","type":"text"}]},{"anchor":"Camera-Integration","type":"heading","text":"Camera Integration","level":2},{"type":"paragraph","inlineContent":[{"type":"text","text":"The user location marker also provides camera position and orientation providers for camera tracking:"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/UserLocationMarker\/cameraPositionProvider","isActive":true,"type":"reference"},{"text":" - For following the user’s position","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/UserLocationMarker\/cameraOrientationProvider","isActive":true,"type":"reference"},{"type":"text","text":" - For rotating the camera based on the user’s heading"}],"type":"paragraph"}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"These values can be assigned to the "},{"type":"reference","identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/MapView","isActive":true},{"type":"text","text":" to have it keep the camera in-sync with the user location marker. See "},{"type":"reference","identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/Camera-Positioning","isActive":true},{"type":"text","text":" for more information."}]}]}],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/User-Location"},"abstract":[{"text":"Display and track the user’s current location on your map.","type":"text"}],"schemaVersion":{"minor":3,"patch":0,"major":0},"references":{"doc://com.applayr.MapLayr/documentation/MapLayr/Route":{"navigatorTitle":[{"text":"Route","kind":"identifier"}],"fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Route","kind":"identifier"}],"url":"\/documentation\/maplayr\/route","title":"Route","identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/Route","role":"symbol","kind":"symbol","type":"topic","abstract":[{"type":"text","text":"A route on the map, typically as returned by the shortest path network."}]},"doc://com.applayr.MapLayr/documentation/MapLayr/MapView":{"fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"MapView"}],"type":"topic","role":"symbol","abstract":[{"type":"text","text":"A view which displays interactive map content."}],"title":"MapView","url":"\/documentation\/maplayr\/mapview","navigatorTitle":[{"kind":"identifier","text":"MapView"}],"identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/MapView","kind":"symbol"},"doc://com.applayr.MapLayr/documentation/MapLayr":{"kind":"symbol","url":"\/documentation\/maplayr","type":"topic","title":"MapLayr","role":"collection","identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr","abstract":[{"type":"text","text":"High performance map view for venue-specific maps."}]},"doc://com.applayr.MapLayr/documentation/MapLayr/API-Key":{"identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/API-Key","type":"topic","title":"API Key","role":"article","url":"\/documentation\/maplayr\/api-key","kind":"article","abstract":[{"text":"Obtain an API key and configure your app to use it.","type":"text"}]},"doc://com.applayr.MapLayr/documentation/MapLayr/UserLocationMarker":{"title":"UserLocationMarker","abstract":[{"type":"text","text":"A marker that can represent the user’s location and orientation."}],"role":"symbol","navigatorTitle":[{"text":"UserLocationMarker","kind":"identifier"}],"fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"UserLocationMarker","kind":"identifier"}],"url":"\/documentation\/maplayr\/userlocationmarker","identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/UserLocationMarker","kind":"symbol","type":"topic"},"doc://com.applayr.MapLayr/documentation/MapLayr/UserLocationMarker/coordinatesProvider":{"identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/UserLocationMarker\/coordinatesProvider","role":"symbol","fragments":[{"text":"var","kind":"keyword"},{"text":" ","kind":"text"},{"text":"coordinatesProvider","kind":"identifier"},{"text":": ","kind":"text"},{"text":"some","kind":"keyword"},{"text":" ","kind":"text"},{"preciseIdentifier":"s:15MapLayrInternal8ProviderP","text":"Provider","kind":"typeIdentifier"},{"text":"<","kind":"text"},{"preciseIdentifier":"s:Sq","text":"Optional","kind":"typeIdentifier"},{"text":"<","kind":"text"},{"preciseIdentifier":"s:15MapLayrInternal21MultilevelCoordinatesV","text":"MultilevelCoordinates","kind":"typeIdentifier"},{"text":">>","kind":"text"}],"title":"coordinatesProvider","kind":"symbol","type":"topic","abstract":[{"type":"text","text":"A provider of the user location marker’s current multilevel coordinates."}],"url":"\/documentation\/maplayr\/userlocationmarker\/coordinatesprovider"},"doc://com.applayr.MapLayr/documentation/MapLayr/UserLocationMarker/cameraPositionProvider":{"identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/UserLocationMarker\/cameraPositionProvider","role":"symbol","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"cameraPositionProvider"},{"kind":"text","text":": "},{"kind":"keyword","text":"some"},{"kind":"text","text":" "},{"kind":"typeIdentifier","text":"CameraPositionProvider","preciseIdentifier":"s:15MapLayrInternal22CameraPositionProviderP"}],"url":"\/documentation\/maplayr\/userlocationmarker\/camerapositionprovider","title":"cameraPositionProvider","kind":"symbol","abstract":[{"type":"text","text":"A camera position provider which reflects the camera’s position."}],"type":"topic"},"https://developer.apple.com/documentation/corelocation/requesting-authorization-to-use-location-services":{"title":"Apple’s documentation","identifier":"https:\/\/developer.apple.com\/documentation\/corelocation\/requesting-authorization-to-use-location-services","titleInlineContent":[{"type":"text","text":"Apple’s documentation"}],"url":"https:\/\/developer.apple.com\/documentation\/corelocation\/requesting-authorization-to-use-location-services","type":"link"},"doc://com.applayr.MapLayr/documentation/MapLayr/UserLocationMarker/cameraOrientationProvider":{"title":"cameraOrientationProvider","kind":"symbol","role":"symbol","url":"\/documentation\/maplayr\/userlocationmarker\/cameraorientationprovider","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"cameraOrientationProvider"},{"kind":"text","text":": "},{"kind":"keyword","text":"some"},{"kind":"text","text":" "},{"kind":"typeIdentifier","text":"CameraOrientationProvider","preciseIdentifier":"s:15MapLayrInternal25CameraOrientationProviderP"}],"type":"topic","identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/UserLocationMarker\/cameraOrientationProvider","abstract":[{"text":"A camera orientation provider which reflects the camera’s orientation.","type":"text"}]},"doc://com.applayr.MapLayr/documentation/MapLayr/ReactiveRoute":{"fragments":[{"text":"class","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"ReactiveRoute"}],"role":"symbol","identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/ReactiveRoute","abstract":[{"text":"A wrapper for a ","type":"text"},{"identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/Route","isActive":true,"type":"reference"},{"text":" which can update based on the route calculation parameters.","type":"text"}],"kind":"symbol","title":"ReactiveRoute","navigatorTitle":[{"kind":"identifier","text":"ReactiveRoute"}],"type":"topic","url":"\/documentation\/maplayr\/reactiveroute"},"doc://com.applayr.MapLayr/documentation/MapLayr/Camera-Positioning":{"role":"article","type":"topic","identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/Camera-Positioning","kind":"article","title":"Camera Positioning","abstract":[{"text":"Control the camera position and orientation programmatically or through automatic providers.","type":"text"}],"url":"\/documentation\/maplayr\/camera-positioning"},"doc://com.applayr.MapLayr/documentation/MapLayr/Position":{"fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"Position"}],"url":"\/documentation\/maplayr\/position","navigatorTitle":[{"kind":"identifier","text":"Position"}],"identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/Position","abstract":[{"type":"text","text":"Sensor-derived multilevel coordinates."}],"type":"topic","kind":"symbol","role":"symbol","title":"Position"},"doc://com.applayr.MapLayr/documentation/MapLayr/Bundle-Map":{"type":"topic","role":"article","title":"Bundle Your Map","kind":"article","url":"\/documentation\/maplayr\/bundle-map","abstract":[{"type":"text","text":"Have your map available immediately when your app launches for the first time."}],"identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/Bundle-Map"},"doc://com.applayr.MapLayr/documentation/MapLayr/Map":{"kind":"symbol","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"Map"}],"navigatorTitle":[{"kind":"identifier","text":"Map"}],"identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/Map","role":"symbol","abstract":[{"text":"An updatable map.","type":"text"}],"url":"\/documentation\/maplayr\/map","title":"Map","type":"topic"},"doc://com.applayr.MapLayr/documentation/MapLayr/UserLocationMarker/overrideHeading":{"title":"overrideHeading","identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/UserLocationMarker\/overrideHeading","role":"symbol","type":"topic","url":"\/documentation\/maplayr\/userlocationmarker\/overrideheading","abstract":[{"type":"text","text":"An optional heading to use instead of the one retrieved through the location manager."}],"kind":"symbol","fragments":[{"text":"var","kind":"keyword"},{"text":" ","kind":"text"},{"text":"overrideHeading","kind":"identifier"},{"text":": ","kind":"text"},{"text":"Heading","kind":"typeIdentifier","preciseIdentifier":"s:15MapLayrInternal7HeadingV"},{"text":"?","kind":"text"}]},"doc://com.applayr.MapLayr/documentation/MapLayr/Routing":{"kind":"article","url":"\/documentation\/maplayr\/routing","role":"article","identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/Routing","abstract":[{"text":"Calculate shortest paths between locations and display them on your map with automatic updates.","type":"text"}],"type":"topic","title":"Computing and Displaying Routes"},"doc://com.applayr.MapLayr/documentation/MapLayr/Heading":{"abstract":[],"identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/Heading","role":"symbol","navigatorTitle":[{"text":"Heading","kind":"identifier"}],"url":"\/documentation\/maplayr\/heading","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Heading","kind":"identifier"}],"title":"Heading","kind":"symbol","type":"topic"},"doc://com.applayr.MapLayr/documentation/MapLayr/Annotations":{"kind":"article","type":"topic","abstract":[{"text":"Display custom markers and points of interest on your map.","type":"text"}],"title":"Adding Annotations to Your Map","identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/Annotations","role":"article","url":"\/documentation\/maplayr\/annotations"},"doc://com.applayr.MapLayr/documentation/MapLayr/Display-Map":{"abstract":[{"text":"Create a ","type":"text"},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/Map"},{"text":" and assign it to a ","type":"text"},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/MapView"},{"text":".","type":"text"}],"kind":"article","identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/Display-Map","role":"article","url":"\/documentation\/maplayr\/display-map","type":"topic","title":"Displaying a Map"},"doc://com.applayr.MapLayr/documentation/MapLayr/UserLocationMarker/overrideLocation":{"title":"overrideLocation","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"overrideLocation"},{"kind":"text","text":": "},{"preciseIdentifier":"s:15MapLayrInternal8PositionV","kind":"typeIdentifier","text":"Position"},{"kind":"text","text":"?"}],"type":"topic","abstract":[{"type":"text","text":"An optional location to use instead of the one retrieved through the location manager."}],"kind":"symbol","role":"symbol","identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/UserLocationMarker\/overrideLocation","url":"\/documentation\/maplayr\/userlocationmarker\/overridelocation"}}}